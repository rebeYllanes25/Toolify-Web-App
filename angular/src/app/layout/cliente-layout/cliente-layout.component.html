<div class="d-flex flex-column min-vh-100">
  <!-- Navbar superior -->
  <header class="navbar navbar-expand-md fixed-top bg-white shadow-sm border-bottom">
    <div class="container">
      <!-- Nombre sin logo -->
      <a class="navbar-brand fw-bold logo" routerLink="/">
        Toolify
      </a>

      <!-- Botón hamburguesa para móvil -->
      <!-- Botón carrito para móviles -->
      <button type="button" class="btn btn-personalizado position-relative d-md-none ms-3" data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasCarrito" aria-controls="offcanvasCarrito" style="    left: 8.5rem !important;
">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-cart" viewBox="0 0 24 24"
          aria-hidden="true">
          <circle cx="8" cy="21" r="1" />
          <circle cx="19" cy="21" r="1" />
          <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
        </svg>
        <span class="position-absolute top-counter translate-middle badge rounded-pill bg-color-primary">
          {{ carrito.length }}
        </span>
      </button>

      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu"
        aria-controls="offcanvasMenu" aria-label="Toggle navigation">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-list" viewBox="0 0 24 24">
          <path d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>

      <!-- Navegación escritorio -->
      <div class="collapse navbar-collapse justify-content-between d-none d-md-flex">
        <ul class="navbar-nav mx-auto mb-2 mb-md-0 gap-10">
          <li class="nav-item">
            <a class="nav-link fw-medium text-secondary" routerLink="/cliente/index" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact:true}" style="color:#6b7280;">
              Inicio
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-medium text-secondary" routerLink="/cliente/producto" routerLinkActive="active"
              style="color:#6b7280;">
              Productos
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-medium text-secondary" routerLink="/cliente/nosotros" routerLinkActive="active"
              style="color:#6b7280;">
              Nosotros
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-medium text-secondary" routerLink="/cliente/contacto" routerLinkActive="active"
              style="color:#6b7280;">
              Contacto
            </a>
          </li>
        </ul>

        <div class="d-flex align-items-center gap-3">
          <div class="dropdown d-none d-sm-inline-block">
            <button class="btn btn-personalizado d-flex align-items-center gap-3" type="button" id="dropdownCuenta"
              data-bs-toggle="dropdown" aria-expanded="false">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-person" viewBox="0 0 24 24"
                aria-hidden="true">
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                <circle cx="12" cy="7" r="4" />
              </svg>
              Cuenta
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownCuenta">
              <li>
                <a class="dropdown-item d-flex align-items-center gap-2 btn-ancho" routerLink="/cliente/perfil">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-person"
                    viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                    <circle cx="12" cy="7" r="4" />
                  </svg>
                  Mi perfil
                </a>
              </li>
              <li *ngIf="checkLoginStatus()">
                <hr class="dropdown-divider">
              </li>
              <li *ngIf="checkLoginStatus()">
                <button class="dropdown-item d-flex align-items-center gap-2 btn-ancho" type="button"
                  (click)="logout()">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-box-arrow-right"
                    viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M10 17l5-5-5-5" />
                    <path d="M15 12H3" />
                    <path d="M19 19v-14" />
                  </svg>
                  Cerrar sesión
                </button>
              </li>
            </ul>
          </div>
          <button type="button" class="btn btn-personalizado position-relative" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasCarrito" aria-controls="offcanvasCarrito">
            <!-- icono svg carrito -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
              stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-cart" viewBox="0 0 24 24"
              aria-hidden="true">
              <circle cx="8" cy="21" r="1" />
              <circle cx="19" cy="21" r="1" />
              <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
            </svg>
            <span class="position-absolute top-counter translate-middle badge rounded-pill bg-color-primary">
              {{ carrito.length }}
            </span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Offcanvas móvil -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">
    <div class="offcanvas-header">
      <h5 class="fw-bold" id="offcanvasMenuLabel" style="color: #576EAA;">Menú</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column justify-content-between p-0">
      <div class="list-group list-group-flush">
        <a routerLink="/cliente/index" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}"
          class="list-group-item list-group-item-action px-3 py-2" data-bs-dismiss="offcanvas">
          <i class="fas fa-home me-2"></i> Inicio
        </a>
        <a routerLink="/cliente/producto" routerLinkActive="active"
          class="list-group-item list-group-item-action px-3 py-2" data-bs-dismiss="offcanvas">
          <i class="fas fa-boxes me-2"></i> Productos
        </a>
        <a routerLink="/cliente/nosotros" routerLinkActive="active"
          class="list-group-item list-group-item-action px-3 py-2" data-bs-dismiss="offcanvas">
          <i class="fas fa-tags me-2"></i> Nosotros
        </a>
        <a routerLink="/cliente/contacto" routerLinkActive="active"
          class="list-group-item list-group-item-action px-3 py-2" data-bs-dismiss="offcanvas">
          <i class="fas fa-envelope me-2"></i> Contacto
        </a>
      </div>
      <div class="p-3 border-top">
        <button class="btn btn-outline-danger w-100" (click)="logout()">
          <i class="fas fa-sign-out-alt me-1"></i> Cerrar sesión
        </button>
      </div>
    </div>
  </div>

  <!-- Offcanvas del carrito -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCarrito" aria-labelledby="offcanvasCarritoLabel">
    <div class="offcanvas-header border-bottom bg-light">
      <h5 class="offcanvas-title fw-bold text-black d-flex align-items-center gap-2" id="offcanvasCarritoLabel">
        <i class="fas fa-shopping-cart"></i> Carrito de Compras
      </h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
    </div>

    <div class="offcanvas-body d-flex flex-column justify-content-between p-0">
      <!-- Lista de productos -->
      <div *ngIf="carrito.length > 0; else vacioTpl" class="p-3 pt-3 pb-0 overflow-auto" style="max-height: 60vh;">
        <div *ngFor="let item of carrito"
          class="d-flex mb-3 align-items-start p-3 rounded bg-light shadow-sm position-relative">
          <!-- Imagen -->
          <ng-container *ngIf="item.producto.base64Img; else imagenLocal">
            <img [src]="'data:image/png;base64,' + item.producto.base64Img" alt="Producto" width="70" height="70"
              class="rounded me-3 object-fit-cover" />
          </ng-container>
          <ng-template #imagenLocal>
            <img [src]="'assets/productos/P' + item.producto.idProducto + '.jpg'" (error)="onImageError($event)"
              alt="Producto" width="70" height="70" class="rounded me-3 object-fit-cover" />
          </ng-template>

          <!-- Info del producto -->
          <div class="flex-grow-1">
            <h5 class="mb-1 fw-semibold">{{ item.producto.nombre }}</h5>
            <h6 class="d-block mb-2 titulos-Primary fw-bold">S/. {{ item.producto.precio | number:'1.2-2' }}</h6>

            <!-- Control de cantidad -->
            <div class="d-flex align-items-center gap-2 mt-2">
              <button class="btn btn-outline-secondary btn-icon" (click)="disminuirCantidad(item.producto.idProducto!)">
                <i class="fas fa-minus"></i>
              </button>

              <span class="fw-bold fs-5 px-2">{{ item.cantidad }}</span>

              <button class="btn btn-outline-secondary btn-icon" (click)="aumentarCantidad(item.producto.idProducto!)">
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>

          <!-- Columna lateral: Eliminar y Subtotal -->
          <div class="d-flex flex-column align-items-end ms-2">
            <!-- Eliminar arriba -->
            <button class="btn btn-sm btn-outline-danger mb-2" (click)="eliminarProducto(item.producto.idProducto!)"
              title="Eliminar">
              <i class="fas fa-trash-alt"></i>
            </button>

            <!-- Subtotal abajo -->
            <span class="fw-bold text-primary color-gray-900">
              {{ 'S/. ' + (item.producto.precio * item.cantidad | number:'1.2-2') }}
            </span>

          </div>
        </div>

      </div>

      <!-- Carrito vacío -->
      <ng-template #vacioTpl>
        <div class="text-center text-muted py-5">
          <i class="fas fa-box-open fa-2x mb-3"></i>
          <p class="mb-0">Tu carrito está vacío.</p>
        </div>
      </ng-template>

      <!-- Total y botón -->
      <div class="border-top bg-white p-3">
        <!-- Cantidad total -->
        <div class="d-flex justify-content-between mb-2">
          <h5 class="fw-semibold text-muted">Productos totales:</h5>
          <h6 class="fw-bold fs-5 color-gray-900">{{ getCantidadTotal() }}</h6>
        </div>

        <!-- Total -->
        <div class="d-flex justify-content-between mb-3">
          <h5 class="fw-semibold">Total:</h5>
          <h6 class="fw-bold fs-5 titulos-Primary">S/. {{ total | number:'1.2-2' }}</h6>
        </div>
        <!-- Botón comprar -->
        <button class="btn btn-primary-custom w-100" (click)="finalizarCompra()">
          <i class="fas fa-credit-card me-2"></i>Finalizar compra
        </button>
      </div>
    </div>
  </div>

  <!-- Contenido principal -->
  <main class="">
    <router-outlet></router-outlet>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white">
    <div class="container max-w-7xl px-4 py-5">
      <div class="row gy-4 gx-5 text-start">
        <!-- Logo y descripción -->
        <div class="col-12 col-md-6 col-lg-3">
          <div class="fw-bold mb-3 fs-3" style="color: #576EAA;">Toolify</div>
          <p class="text-white mb-4" style="font-size:1.1rem;">
            Tu socio de confianza para herramientas profesionales y soluciones de ferretería. Sirviendo a contratistas y
            entusiastas del bricolaje desde 1995.
          </p>
          <div class="d-flex justify-content-start gap-3">
            <a href="#" class="text-white fs-5 hover-primary" aria-label="Facebook">
              <!-- Ícono Facebook -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-facebook"
                viewBox="0 0 24 24">
                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" />
              </svg>
            </a>
            <a href="#" class="text-white fs-5 hover-primary" aria-label="Twitter">
              <!-- Ícono Twitter -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-twitter"
                viewBox="0 0 24 24">
                <path
                  d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z" />
              </svg>
            </a>
            <a href="#" class="text-white fs-5 hover-primary" aria-label="Instagram">
              <!-- Ícono Instagram -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-instagram"
                viewBox="0 0 24 24">
                <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
              </svg>
            </a>
            <a href="#" class="text-white fs-5 hover-primary" aria-label="LinkedIn">
              <!-- Ícono LinkedIn -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bi bi-linkedin"
                viewBox="0 0 24 24">
                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z" />
                <rect width="4" height="12" x="2" y="9"></rect>
                <circle cx="4" cy="4" r="2"></circle>
              </svg>
            </a>
          </div>
        </div>

        <!-- Enlaces Rápidos -->
        <div class="col-12 col-md-6 col-lg-3">
          <h5 class="fw-semibold mb-3 fs-4">Enlaces Rápidos</h5>
          <ul class="list-unstyled">
            <li><a href="/" class="text-white-hover text-decoration-none d-block py-1 fs-5">Inicio</a></li>
            <li><a href="/cliente/producto"
                class="text-white-hover text-decoration-none d-block py-1 fs-5">Productos</a></li>
            <li><a href="/cliente/nosotros" class="text-white-hover text-decoration-none d-block py-1 fs-5">Nosotros</a>
            </li>
            <li><a href="/cliente/contacto" class="text-white-hover text-decoration-none d-block py-1 fs-5">Contacto</a>
            </li>
          </ul>
        </div>

        <!-- Categorías -->
        <div class="col-12 col-md-6 col-lg-3">
          <h5 class="fw-semibold mb-3 fs-4">Categorías</h5>
          <ul class="list-unstyled">
            <li>
            <li>
              <a [routerLink]="['/cliente/producto']" [queryParams]="{ categoria: 4 }"
                class="text-white-hover text-decoration-none d-block py-1 fs-5">
                Taladros
              </a>
            </li>
            <li><a [routerLink]="['/cliente/producto']" [queryParams]="{ categoria: 5 }"
                class="text-white-hover text-decoration-none d-block py-1 fs-5">Compresoras</a></li>
            <li><a [routerLink]="['/cliente/producto']" [queryParams]="{ categoria: 8 }"
                class="text-white-hover text-decoration-none d-block py-1 fs-5">Tanques de agua</a></li>
            <li><a [routerLink]="['/cliente/producto']" [queryParams]="{ categoria: 10}"
                class="text-white-hover text-decoration-none d-block py-1 fs-5">Pisos cerámicos</a></li>
            <li><a [routerLink]="['/cliente/producto']" [queryParams]="{ categoria: 6 }"
                class="text-white-hover text-decoration-none d-block py-1 fs-5">Cables eléctricos</a></li>
          </ul>
        </div>

        <!-- Información de Contacto -->
        <div class="col-12 col-md-6 col-lg-3">
          <h5 class="fw-semibold mb-3 fs-4">Información de Contacto</h5>
          <ul class="list-unstyled d-flex gap-3 flex-column">
            <li class="d-flex align-items-center mb-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="none" stroke="#576EAA"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="me-2" viewBox="0 0 24 24"
                aria-hidden="true">
                <path
                  d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0">
                </path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              <span class="text-white">Calle Industrial 123, Ciudad Herramientas, CH 12345</span>
            </li>
            <li class="d-flex align-items-center mb-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" stroke="#576EAA"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="me-2" viewBox="0 0 24 24"
                aria-hidden="true">
                <path
                  d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                </path>
              </svg>
              <span class="text-white">(555) 123-TOOL</span>
            </li>
            <li class="d-flex align-items-center mb-3">
              <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" stroke="#576EAA"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="me-2" viewBox="0 0 24 24"
                aria-hidden="true">
                <path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"></path>
                <rect x="2" y="4" width="20" height="16" rx="2"></rect>
              </svg>
              <span class="text-white">info&#64;toolify.com</span>
            </li>
          </ul>

          <h6 class="fw-semibold fs-4">Horario de Atención</h6>
          <div class="text-white small">
            <div class="d-flex flex-column gap-2">
              <span>Lun-Vie: 7:00 AM - 7:00 PM</span>
              <span>Sábado: 8:00 AM - 6:00 PM</span>
              <span>Domingo: 9:00 AM - 5:00 PM</span>
            </div>
          </div>
        </div>
      </div>

      <hr class="border-secondary my-4" style="border-width: 3px;">

      <div class="d-flex flex-column flex-sm-row justify-content-between align-items-center">
        <div class="mb-3 mb-sm-0 color-gray-500">© 2025 Ferretería Toolify. Todos los derechos reservados.</div>
        <div class="d-flex gap-4">
          <a href="/" class="text-decoration-none color-gray-500">Política de Privacidad</a>
          <a href="/" class="text-decoration-none  color-gray-500">Términos de Servicio</a>
          <a href="/" class="text-decoration-none color-gray-500">Garantía</a>
        </div>
      </div>
    </div>

  </footer>


</div>